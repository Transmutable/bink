<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/Component.js | @transmutable/bink</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="A sleek and reactive framework for web pages"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@transmutable/bink"><meta property="twitter:description" content="A sleek and reactive framework for web pages"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/Transmutable/bink"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/App.js~App.html">App</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Component.js~Component.html">Component</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/DataCollection.js~DataCollection.html">DataCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/DataModel.js~DataModel.html">DataModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/DataObject.js~DataObject.html">DataObject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/EventHandler.js~EventHandler.html">EventHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Localizer.js~Localizer.html">Localizer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Localizer.js~Translation.html">Translation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/MockService.js~MockService.html">MockService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Router.js~Route.html">Route</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Router.js~Router.html">Router</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ld">ld</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ldo">ldo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ldt">ldt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-lt">lt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-throttle">throttle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-dom">dom</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-throttledConsoleLog">throttledConsoleLog</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-atoms">components/atoms</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/AudioComponent.js~AudioComponent.html">AudioComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/ButtonComponent.js~ButtonComponent.html">ButtonComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/HeadingComponent.js~HeadingComponent.html">HeadingComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/ImageComponent.js~ImageComponent.html">ImageComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/LabelComponent.js~LabelComponent.html">LabelComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/LinkComponent.js~LinkComponent.html">LinkComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/MultiComponent.js~MultiComponent.html">MultiComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/ProgressComponent.js~ProgressComponent.html">ProgressComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/SelectionComponent.js~SelectionComponent.html">SelectionComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/SliderComponent.js~SliderComponent.html">SliderComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/SwitchComponent.js~SwitchComponent.html">SwitchComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/TextComponent.js~TextComponent.html">TextComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/TextInputComponent.js~TextInputComponent.html">TextInputComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/ToggleComponent.js~ToggleComponent.html">ToggleComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/atoms/VideoComponent.js~VideoComponent.html">VideoComponent</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-molecules">components/molecules</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/AudioPlayerComponent.js~AudioPlayerComponent.html">AudioPlayerComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/CardComponent.js~CardComponent.html">CardComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/FormComponent.js~DateFieldComponent.html">DateFieldComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/FormComponent.js~FormComponent.html">FormComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/FormComponent.js~FormFieldComponent.html">FormFieldComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/FormComponent.js~SelectionFieldComponent.html">SelectionFieldComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/FormComponent.js~SwitchFieldComponent.html">SwitchFieldComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/FormComponent.js~TextInputFieldComponent.html">TextInputFieldComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/ImageCardComponent.js~ImageCardComponent.html">ImageCardComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/MenuComponent.js~MenuComponent.html">MenuComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/PaginationComponent.js~PaginationComponent.html">PaginationComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/ToolTipComponent.js~ToolTipComponent.html">ToolTipComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/VideoPlayerComponent.js~VideoPlayerComponent.html">VideoPlayerComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/molecules/WaitComponent.js~WaitComponent.html">WaitComponent</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-organisms">components/organisms</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/organisms/CollectionComponent.js~CollectionComponent.html">CollectionComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/organisms/CollectionComponent.js~DefaultItemComponent.html">DefaultItemComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/organisms/MastheadComponent.js~MastheadComponent.html">MastheadComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/components/organisms/MediaGridComponent.js~MediaGridComponent.html">MediaGridComponent</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/Component.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import dom from &apos;./DOM.js&apos;
import EventHandler from &apos;./EventHandler.js&apos;

/**
`Component` contains the reactive logic for a responsive UI element.

It manages its DOM fragment based on events from DataModels and DataCollections as well as user input events.

It also tracks listeners so that on `cleanup` it can deregister itself to prevent object leaks.

Bink comes with a library of components so be sure to check the API docs before implementing a common basic view. They are also pretty good examples of how to write Components.

@example &lt;caption&gt;A toggle with a label&lt;/caption&gt;
class BinaryComponent extends Component {
	constructor(dataObject=null, options={}) {
		super(dataObject, Object.assign(options, {
			label: null,
			dataField: null,
			dom: dom.span() // Default to a `span` DOM element
		})
		this.addClass(&apos;binary-component&apos;)

		// Check that we have the info we need
		if (typeof this.options.dataField !== &apos;string&apos;) {
			throw new Error(&apos;BinaryComponent requires a `dataField` option&apos;)
		}
		if (this.dataObject instanceof DataModel === false) {
			throw new Error(&apos;BinaryComponent requires a DataModel&apos;)
		}

		// Use a few sub-Components for UI
		this._labelComponent = new LabelComponent(undefined, {
				text: this.options.label || lt(&apos;No label&apos;)
		}).appendTo(this)

		this._toggleComponent = new SwitchComponent( this.dataObject, {
			dataField: this.options.dataField
		}).appendTo(this)
	}
}


*/
const Component = class extends EventHandler {
	/**
	@param {DataObject} [dataObject=null]
	@param {Object} [options={}]
	@param {HTMLElement} [options.dom=div] The HTML element that contains this Component&apos;s UI
	@param {string} [options.anchor=null] A URL that to which the document will traverse if the `dom` is clicked.
	@param {string} [options.name=null] If set, calls {@link Component.setName} with the value
	*/
	constructor(dataObject = null, options = {}) {
		super()
		/** @type {DataObject} */
		this.dataObject = dataObject // a DataModel or DataCollection

		/**
		@type {Object}
		@property {HTMLElement} [dom=null]
		*/
		this.options = Object.assign(
			{
				dom: null,
				anchor: null,
			},
			options
		)
		this.cleanedUp = false
		this._dom = this.options.dom || dom.div()
		this._anchor = this.options.anchor

		// See the Binder class below for info
		this._binder = new Binder(this)

		this.addClass(&apos;component&apos;)

		if (this.options.name) {
			this.setName(this.options.name)
		}

		if (this._anchor) {
			this.listenTo(&apos;click&apos;, this.dom, (ev) =&gt; {
				document.location.href = this._anchor
			})
		}
	}

	/**
	Called to dispose of any resources used by this component, including any listeners added via {@link Component.listenTo}.

	Extending classes *should* override and release any resources that they control.

	@return {Component} - the Component should not be used after this but the return is useful for chaining
	*/
	cleanup() {
		if (this.cleanedUp) return
		this.cleanedUp = true
		super.cleanup() // Cleans up the EventHandler
		this._binder.cleanup() // Cleans up bindings from `listenTo`
		return this
	}

	/**
	The DOM object that contains this Component&apos;s UI.

	You can override the default `dom` value from the constructor by passing an HTMLElement into the constructor&apos;s `options.dom`.

	@example &lt;caption&gt;Use it like any normal DOM element&lt;/caption&gt;
	myComponent.dom.setAttribute(&apos;data-example&apos;, &apos;new-value&apos;)

	@return {HTMLElement}
	*/
	get dom() {
		return this._dom
	}

	/**
	A URL that to which the document will traverse if the `dom` is clicked, usually set via the constructor&apos;s `Option.anchor`

	@return {?string}
	*/
	get anchor() {
		return this._anchor
	}

	/**
	@param {string} [value=null] - A URL string to which the document will traverse if the `dom` is clicked
	*/
	set anchor(value) {
		this._anchor = value
	}

	/**
	Adds the childComponent&apos;s `dom` as a child of this Component&apos;s `dom`

	@param {Component} childComponent
	@return {Component} returns `this` (not the child component) for chaining
	*/
	appendComponent(childComponent) {
		this._dom.appendChild(childComponent.dom)
		return this
	}

	/**
	Removes the childComponent&apos;s `dom` from this Component&apos;s `dom`

	@param {Component} childComponent
	@param {boolean} [clean=true] if true, call {@link Component.cleanup} on the removed Component
	@return {Component} returns `this` (not the childComponent) for chaining
	*/
	removeComponent(childComponent, clean = true) {
		this._dom.removeChild(childComponent.dom)
		if (clean) childComponent.cleanup()
		return this
	}

	/**
	A handy method for quick creation and setting of a parent:

	@example
	this._fooComponent = new FooComponent().appendTo(parentComponent)

	@param {Component} parentComponent - The component to which `this` is appended
	@return {Component} returns `this` (not the parent component) for chaining
	*/
	appendTo(parentComponent) {
		parentComponent.appendComponent(this)
		return this
	}

	/**
	Sets the `name` attribute on this component&apos;s `dom.dataset` attribute.

	This is optional but it can be useful during debugging.

	@param {string} name
	@return {Component} returns `this` for chaining
	*/
	setName(name) {
		this._dom.setAttribute(&apos;data-name&apos;, name)
		return this
	}

	/**
	Add one or more classes to this component&apos;s dom `class` attribute without removing any existing classes.

	This is optional but the best practice is to add a unique name for classes that extend `Component`.

	@param {...string} classNames
	@return {Component} returns `this` for chaining
	*/
	addClass(...classNames) {
		this._dom.addClass(...classNames)
		return this
	}

	/**
	Remove one or more classes from this component&apos;s dom `class` attribute without changing other classes

	@param {...string} classNames
	@return {Component} returns `this` for chaining
	*/
	removeClass(...classNames) {
		this._dom.removeClass(...classNames)
		return this
	}

	/**
	Hides the dom by adding the `hidden` class

	@return {Component} returns `this` for chaining
	*/
	hide() {
		this.addClass(&apos;hidden&apos;)
		return this
	}

	/**
	Shows the dom by removing the `hidden` class

	@return {Component} returns `this` for chaining
	*/
	show() {
		this.removeClass(&apos;hidden&apos;)
		return this
	}

	/**
	Listen to a DOM, {@link Component}, or {@link DataObject} event.

	The nice thing about using `listenTo` instead of directly adding event listeners is that {@link Component.cleanup} will remove all of those listeners to avoid leaking this object.

	@example
	this.buttonDOM = dom.button(&apos;Click me&apos;)
	this.listenTo(&apos;click&apos;, this.buttonDOM, (domEvent) =&gt; { ... })

	@example
	this.buttonComponent = new ButtonComponent(...).appendTo(this)
	this.listenTo(ButtonComponent.ActivatedEvent, this.buttonComponent, (eventName) =&gt; { ... })

	@example
	this.exampleModel = new DataModel({ someField: 42 })
	this.listenTo(&apos;changed:someField&apos;, this.exampleModel, (eventName, ...params) =&gt; { ... })

	@param {string} eventName
	@param {HTMLElement or EventHandler} target
	@param {function} callback
	@param {boolean} [once=false] only listen to the first event, then unbind
	*/
	listenTo(eventName, target, callback, once = false) {
		this._binder.listenTo(eventName, target, callback, once)
	}

	/**
	Sets the `innerText` of the target DOM element to the value of `dataModel.get(dataField, &apos;&apos;)`, even as it changes.

	`formatter` defaults to the identity function but can be any function that accepts the value and returns a string.

	@example
	this.component = new Component(
		new DataModel({ description: &apos;Some example text&apos; })
	)
	this.component.bindText(
		&apos;description&apos;, 		// dataField
		this.component.dom,	// target
		(value) =&gt; { return (typeof value === &apos;string&apos;) ? value.toUpperCase() : &apos;&apos; }
	)
	// Now any changes to the DataModel&apos;s `description` field will be displayed by the component

	@param {string} dataField The name of the field to watch
	@param {HTMLElement} target The DOM element whose `innerText` will be manipulated
	@param {function(value: *): string} [formatter=null]
	@param {DataModel} [dataModel=this.dataObject] defaults to this Component&apos;s `dataObject`
	*/
	bindText(dataField, target, formatter = null, dataModel = this.dataObject) {
		this._binder.bindText(dataField, target, formatter, dataModel)
	}

	/**
	Sets an attribute of the target DOM element to the value of dataModel.get(dataField), even as it changes.

	`formatter` defaults to the identity function but can be any function that accepts the value and returns a string.

	@example
	this.component = new Component(
		new DataModel({ isAmazing: false })
	)
	this.component.bindAttribute(
		&apos;isAmazing&apos;, 		// dataField
		this.component.dom,	// target
		&apos;data-example&apos;,		// attributeName
		(value) =&gt; { return value ? &apos;is-amazing&apos; : &apos;not-amazing&apos; }
	)
	// Now any changes to this.component.dataObject will change the `data-example` attribute
	this.component.dataObject.set(&apos;isAmazing&apos;, true)

	@param {string} dataField - The name of the field on the `DataModel`
	@param {HTMLElement} target - The DOM element to manipulate 
	@param {string} attributeName - The DOM element&apos;s attribute to change
	@param {function(value: *): string} [formatter=null] - defaults to identity (no change to field data)
	@param {DataModel} dataModel
	*/
	bindAttribute(dataField, target, attributeName, formatter = null, dataModel = this.dataObject) {
		this._binder.bindAttribute(dataField, target, attributeName, formatter, dataModel)
	}
}

/**
Binder listens for events on {@link EventHandler}s or DOM elements and changes characteristics of an HTMLElement or Component in response.
This is part of what makes a Component &quot;reactive&quot;.
*/
const Binder = class {
	/**
	@param {Component} component
	*/
	constructor(component) {
		this._component = component
		this._boundCallbacks = [] // { callback, dataObject } to be unbound during cleanup
		this._eventCallbacks = [] // { callback, eventName, target } to be unregistered during cleanup
	}

	cleanup() {
		for (const bindInfo of this._boundCallbacks) {
			bindInfo.dataObject.removeListener(bindInfo.callback)
		}
		for (const info of this._eventCallbacks) {
			if (info.target instanceof EventHandler) {
				info.target.removeListener(info.callback, info.eventName)
			} else {
				info.target.removeEventListener(info.eventName, info.callback)
			}
		}
	}

	/**
	Listen to a DOM or EventHandler event.
	For example:
		this.buttonDOM = dom.button()
		this.listenTo(&apos;click&apos;, this.buttonDOM, this.handleClick)

		this.textComponent = new TextComponent(...)
		this.listenTo(Component.TextInputEvent, this.textComponent, (eventName, ...params) =&gt; { ... })

	@param {string} eventName
	@param {HTMLElement or EventHandler} target
	@param {function} callback
	@param {boolean} [once]
	*/
	listenTo(eventName, target, callback, once = false) {
		const info = {
			eventName: eventName,
			target: target,
			callback: callback,
			once: once,
		}
		if (target instanceof EventHandler) {
			target.addListener(eventName, info.callback)
		} else {
			target.addEventListener(eventName, info.callback)
		}
		this._eventCallbacks.push(info)
	}

	/**
	Sets the `innerText` of the target DOM element to the value of dataModel.get(dataField), even as it changes.

	`formatter` defaults to the identity function but can be any function that accepts the value and returns a string.

	@example
	this.component = new Component(
		new DataModel({ description: &apos;Some example text&apos; })
	)
	this.component.bindText(
		&apos;description&apos;, 		// dataField
		this.component.dom,	// target
		(value) =&gt; { return (typeof value === &apos;string&apos;) ? value.toUpperCase() : &apos;&apos; }
	)
	// Now any changes to the DataModel&apos;s `description` field will be displayed by the component

	@param {string} dataField The name of the field to watch
	@param {HTMLElement} target The DOM element whose `innerText` will be manipulated
	@param {function(value: *): string} [formatter=null]
	@param {DataModel} [dataModel=this.dataObject] defaults to this Component&apos;s `dataObject`
	*/
	bindText(dataField, target, formatter = null, dataModel = this._component.dataObject) {
		if (formatter === null) {
			formatter = (value) =&gt; {
				if (value === null) return &apos;&apos;
				if (typeof value === &apos;string&apos;) return value
				return &apos;&apos; + value
			}
		}
		const callback = () =&gt; {
			const result = formatter(dataModel.get(dataField))
			target.innerText = typeof result === &apos;string&apos; ? result : &apos;&apos;
		}
		dataModel.addListener(`changed:${dataField}`, callback)
		callback()
		this._boundCallbacks.push({
			callback: callback,
			dataObject: dataModel,
		})
	}

	/**
	Sets an attribute of the target DOM element to the value of dataModel.get(dataField), even as it changes.

	`formatter` defaults to the identity function but can be any function that accepts the value and returns a string.

	@example
	this.component = new Component(
		new DataModel({ isAmazing: false })
	)
	this.component.bindAttribute(
		&apos;isAmazing&apos;, 		// dataField
		this.component.dom,	// target
		&apos;data-example&apos;,		// attributeName
		(value) =&gt; { return value ? &apos;is-amazing&apos; : &apos;not-amazing&apos; }
	)
	// Now any changes to this.component.dataObject will change the `data-example` attribute
	this.component.dataObject.set(&apos;isAmazing&apos;, true)

	@param {string} dataField - The name of the field on the `DataModel`
	@param {HTMLElement} target - The DOM element to manipulate 
	@param {string} attributeName - The DOM element&apos;s attribute to change
	@param {function(value: *): string} [formatter=null] - defaults to identity (no change to field data)
	@param {DataModel} dataModel
	*/
	bindAttribute(dataField, target, attributeName, formatter = null, dataModel = this._component.dataObject) {
		if (formatter === null) {
			formatter = (value) =&gt; {
				if (value === null) return &apos;&apos;
				if (typeof value === &apos;string&apos;) return value
				return &apos;&apos; + value
			}
		}
		const callback = () =&gt; {
			target.setAttribute(attributeName, formatter(dataModel.get(dataField)))
		}
		dataModel.addListener(`changed:${dataField}`, callback)
		callback()
		this._boundCallbacks.push({
			callback: callback,
			dataObject: dataModel,
		})
	}
}

export default Component
export { Component }
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
